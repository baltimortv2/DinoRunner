<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#17212b">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true">
    <title>Dino Runner</title>
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ctext y='50' x='10' font-size='48'%3E%F0%9F%A6%95%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/offline-mode.css">
    <link rel="stylesheet" href="./css/button-styles.css">
    
    <!-- TON Connect SDK -->
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
  </head>
  <body>
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è -->
    <div id="connection-status" class="connection-status">üî¥ –û—Ñ—Ñ–ª–∞–π–Ω</div>
    
    <div id="app" class="overlay-open">
      <div id="offline-banner" class="offline-banner hidden">OFFLINE ¬∑ –æ—á–∫–∏/–º–æ–Ω–µ—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è ¬∑ –ª–∏–¥–µ—Ä–±–æ—Ä–¥ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω</div>
      <!-- –ò–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å -->
      <div class="game-container">
        <!-- –õ–∏–¥–µ—Ä–±–æ—Ä–¥ –ø–∞–Ω–µ–ª—å —Å–ª–µ–≤–∞ -->
        <div id="leaderboard-panel" class="leaderboard-panel hidden" aria-live="polite">
          <div class="lb-header">
            <div class="window-header" style="margin-bottom: 8px; padding-bottom: 4px;">
              <h3 class="window-title" style="font-size: 18px;">üèÜ –õ–∏–¥–µ—Ä–±–æ—Ä–¥</h3>
            </div>
            <h3>üèÜ –õ–∏–¥–µ—Ä—ã</h3>
          </div>
          <div id="leaderboard-body" class="lb-body">
            <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
          </div>
          <div style="padding: 12px 14px; border-top: 1px solid rgba(42,58,74,0.35);">
            <button id="lb-close" class="btn btn-secondary" style="width: 100%;">–ó–∞–∫—Ä—ã—Ç—å</button>
          </div>
        </div>

        <canvas id="game-canvas" aria-label="–ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ"></canvas>

        <!-- –ù–∞—á–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω -->
        <div id="tap-to-start" class="gameover" role="dialog" aria-modal="true" aria-labelledby="start-title">
          <div class="gameover-content start-content">
            <div class="window-header">
              <h2 class="window-title">üéÆ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É</h2>
              <p class="window-subtitle" id="welcome-subtitle">–ü—Ä–∏–≤–µ—Ç, –∏–≥—Ä–æ–∫!</p>
            </div>
            <h1 class="game-title">ü¶ï Dino Runner</h1>
            <p class="game-subtitle">–ü—Ä—ã–≥–∞–π –∏ –∏–∑–±–µ–≥–∞–π –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π!</p>
            <button id="btn-start" class="btn btn-primary btn-start" aria-label="–ù–∞—á–∞—Ç—å –∏–≥—Ä—É">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
          </div>
        </div>

        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="main-menu" class="gameover hidden" role="dialog" aria-modal="true" aria-labelledby="main-menu-title">
          <div class="gameover-content main-menu-content">
            <div class="window-header">
              <h2 class="window-title">üè† –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</h2>
              <p class="window-subtitle">–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏–≥—Ä–µ</p>
            </div>
            <h1 class="game-title">ü¶ï Dino Runner</h1>
            
            <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–≥—Ä–æ–≤–æ–π —Å—Ü–µ–Ω—ã -->
            <div class="game-preview">
              <canvas id="preview-canvas" width="480" height="240"></canvas>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div id="main-menu-stats" style="display:flex; gap:10px; justify-content:space-between; margin-bottom:12px;">
              <div class="hud-item" style="flex:1; min-width:auto;"><span class="hud-icon">üèÜ</span><span>–û—á–∫–∏:</span>&nbsp;<strong id="mms-score">0</strong></div>
              <div class="hud-item" style="flex:1; min-width:auto;"><span class="hud-icon">ü™ô</span><span>–ú–æ–Ω–µ—Ç—ã:</span>&nbsp;<strong id="mms-coins">0</strong></div>
              <div class="hud-item" style="flex:1; min-width:auto;"><span class="hud-icon">‚≠ê</span>&nbsp;<strong id="mms-era">1</strong></div>
            </div>
            
            <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="main-menu-buttons">
              <button id="btn-main-start" class="main-menu-btn btn-success">
                <span class="btn-icon">‚ñ∂Ô∏è</span>
                <span>–°—Ç–∞—Ä—Ç</span>
              </button>
              <button id="btn-main-shop" class="main-menu-btn btn-danger">
                <span class="btn-icon">üõçÔ∏è</span>
                <span>–ú–∞–≥–∞–∑–∏–Ω</span>
              </button>
              <button id="btn-leaderboard" class="main-menu-btn btn-secondary">
                <span class="btn-icon">üèÜ</span>
                <span>–õ–∏–¥–µ—Ä—ã</span>
              </button>
              <button id="btn-main-menu" class="main-menu-btn btn-primary">
                <span class="btn-icon">‚öôÔ∏è</span>
                <span>–ú–µ–Ω—é</span>
              </button>
            </div>
          </div>
        </div>

        <!-- –≠–∫—Ä–∞–Ω Game Over -->
        <div id="gameover" class="gameover hidden" role="dialog" aria-modal="true" aria-labelledby="go-title">
          <div class="gameover-content">
            <div class="window-header">
              <h2 class="window-title">üíÄ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞</h2>
              <p class="window-subtitle">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã</p>
            </div>
            <h2 class="gameover-title">üíÄ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
            <div class="score-display">
              <p>–í–∞—à —Å—á–µ—Ç: <span id="final-score" class="final-score">0</span></p>
            </div>
            <div style="display:flex; flex-direction:column; gap:10px;">
              <button id="btn-restart" class="btn btn-primary btn-restart">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
              <button id="btn-mainmenu-go" class="btn btn-secondary btn-restart">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
            </div>
          </div>
        </div>
      </div>

      <!-- HUD - —Å–≤–µ—Ä—Ö—É –Ω–∞–¥ –∫–Ω–æ–ø–∫–æ–π "–ù–∞—á–∞—Ç—å" -->
      <div id="hud" class="hud" role="status" aria-live="polite">
        <div class="hud-item">
          <span class="hud-icon">üèÜ</span>
          <span class="hud-label">–û—á–∫–∏:</span>
          <span id="score">0</span>
        </div>
        <div class="hud-item">
          <span class="hud-icon">ü™ô</span>
          <span class="hud-label">–ú–æ–Ω–µ—Ç—ã:</span>
          <span id="coins">0</span>
        </div>
        <div class="hud-item">
          <span class="hud-icon">‚≠ê</span>
          <span id="era">1</span>
        </div>
      </div>

      <!-- BOTTOM BAR -->
      <div class="bottom-bar">
        <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="bottom-controls-row">
          <button id="btn-shop-bottom" class="btn-large btn-danger" aria-label="–ú–∞–≥–∞–∑–∏–Ω">
            <span class="btn-icon">üõçÔ∏è</span>
            <span>–ú–∞–≥–∞–∑–∏–Ω</span>
          </button>
          <button id="btn-mainmenu-bottom" class="btn-large btn-secondary" aria-label="–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
            <span class="btn-icon">üè†</span>
            <span>–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</span>
          </button>
          <button id="btn-menu-bottom" class="btn-large btn-primary" aria-label="–ú–µ–Ω—é">
            <span class="btn-icon">‚ãØ</span>
            <span>–ú–µ–Ω—é</span>
          </button>
        </div>


      </div>



      <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
      <div id="menu" class="menu hidden" role="dialog" aria-modal="true" aria-labelledby="menu-title">
        <div class="menu-content">
          <div class="menu-header">
            <h3 id="menu-title">‚öôÔ∏è –ú–µ–Ω—é –∏–≥—Ä—ã</h3>
          </div>
          <div class="window-header">
            <h4 class="window-subtitle">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</h4>
          </div>
          <div class="menu-buttons">
            <button id="btn-sound" class="menu-btn">
              <span class="menu-icon">üîä</span>
              <span class="menu-text">–ó–≤—É–∫</span>
            </button>
            <button id="btn-referrals" class="menu-btn">
              <span class="menu-icon">üë•</span>
              <span class="menu-text">–†–µ—Ñ–µ—Ä–∞–ª—ã</span>
            </button>
            <button id="btn-exchange" class="menu-btn">
              <span class="menu-icon">üí±</span>
              <span class="menu-text">–û–±–º–µ–Ω</span>
            </button>
            <button id="btn-withdraw" class="menu-btn">
              <span class="menu-icon">üí∞</span>
              <span class="menu-text">–í—ã–≤–æ–¥</span>
            </button>
            <button id="btn-nickname" class="menu-btn">
              <span class="menu-icon">üë§</span>
              <span class="menu-text">–ù–∏–∫–Ω–µ–π–º</span>
            </button>
            <button id="btn-theme" class="menu-btn">
              <span class="menu-icon">üåô</span>
              <span class="menu-text">–¢–µ–º–∞</span>
            </button>
          </div>
          <div class="socials">
            <a href="https://t.me/dinorunfamily" class="social-link telegram" target="_blank" rel="noopener">
              <span class="social-icon">üì±</span>
              <span>Telegram</span>
            </a>
            <a href="https://x.com/dinorunfamily?s=21" class="social-link x-twitter" target="_blank" rel="noopener">
              <span class="social-icon">üê¶</span>
              <span>X (Twitter)</span>
            </a>
            <a href="#" class="social-link website" target="_blank" rel="noopener">
              <span class="social-icon">üåê</span>
              <span>–°–∞–π—Ç</span>
            </a>
          </div>
          <button id="btn-dev-tools" class="menu-btn">
            <span class="menu-icon">üîß</span>
            <span class="menu-text">Dev Tools</span>
          </button>
          <button id="btn-menu-close" class="menu-btn menu-btn-exit">
            <span class="menu-icon">‚úñÔ∏è</span>
            <span class="menu-text">–í—ã—Ö–æ–¥</span>
          </button>
          <div id="dev-tools-panel" class="dev-tools-panel hidden">
            <div class="dev-section">
              <h4>üéØ –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã</h4>
              <div class="dev-controls">
                <label>
                  <span>–ú–Ω–æ–∂–∏—Ç–µ–ª—å –æ—á–∫–æ–≤:</span>
                  <input type="number" id="dev-score-mult" value="1" min="0.1" max="10" step="0.1">
                </label>
                <label>
                  <span>–°—Ç–∞—Ä—Ç–æ–≤—ã–µ –º–æ–Ω–µ—Ç—ã:</span>
                  <input type="number" id="dev-coins" value="500" min="0" max="1000000">
                </label>
                <label>
                  <span>–°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç—Ç–∞–ø:</span>
                  <input type="number" id="dev-era" value="1" min="1" max="14">
                </label>
                <label>
                  <input type="checkbox" id="dev-godmode">
                  <span>God Mode (–±–µ—Å—Å–º–µ—Ä—Ç–∏–µ)</span>
                </label>
                <label>
                  <input type="checkbox" id="dev-infinite-coins">
                  <span>–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –º–æ–Ω–µ—Ç—ã</span>
                </label>
              </div>
            </div>

            <div class="dev-section">
              <h4>üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π</h4>
              <div class="dev-buttons">
                <button id="dev-reset-score">–°–±—Ä–æ—Å–∏—Ç—å –æ—á–∫–∏</button>
                <button id="dev-reset-coins">–°–±—Ä–æ—Å–∏—Ç—å –º–æ–Ω–µ—Ç—ã</button>
                <button id="dev-set-coins-1000">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 1000 –º–æ–Ω–µ—Ç</button>
                <button id="dev-set-coins-10000">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å 10000 –º–æ–Ω–µ—Ç</button>
                <button id="dev-set-era-5">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–∞–ø 5</button>
                <button id="dev-set-era-10">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–∞–ø 10</button>
                <button id="dev-max-progress">–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
              </div>
            </div>

            <div class="dev-section">
              <h4>üîß –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h4>
              <div class="dev-buttons">
                <button id="dev-log-state">–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã</button>
                <button id="dev-test-assets">–¢–µ—Å—Ç –∞—Å—Å–µ—Ç–æ–≤</button>
                <button id="dev-clear-storage">–û—á–∏—Å—Ç–∏—Ç—å localStorage</button>
              </div>
            </div>
          </div>
          <button id="btn-close-menu" class="menu-btn menu-btn-exit">
            <span class="menu-icon">‚ùå</span>
            <span class="menu-text">–ó–∞–∫—Ä—ã—Ç—å</span>
          </button>
        </div>
      </div>

      <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
      <div id="modal-overlay" class="modal-overlay hidden">
        <div id="modal" class="modal">
          <div class="modal-header">
            <h3 id="modal-title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</h3>
          </div>
          <div class="window-header">
            <h4 class="window-subtitle">–û–±—â–µ–µ –æ–∫–Ω–æ</h4>
          </div>
          <div id="modal-content">
            –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
          </div>
          <div style="padding: 16px; border-top: 1px solid rgba(42,58,74,0.3); display: flex; justify-content: flex-end;">
            <button id="btn-close" class="btn btn-secondary">–ó–∞–∫—Ä—ã—Ç—å</button>
          </div>
        </div>
      </div>

      <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–±–º–µ–Ω–∞ -->
      <div id="exchange-modal" class="modal-overlay hidden">
        <div class="modal">
          <div class="modal-header">
            <h3>üí± –û–±–º–µ–Ω –æ—á–∫–æ–≤ –Ω–∞ –º–æ–Ω–µ—Ç—ã</h3>
          </div>
          <div class="window-header">
            <h3 class="window-title" style="font-size: 20px;">üí± –û–±–º–µ–Ω –æ—á–∫–æ–≤ –Ω–∞ –º–æ–Ω–µ—Ç—ã</h3>
            <h4 class="window-subtitle">–≠–∫–æ–Ω–æ–º–∏–∫–∞ –∏–≥—Ä—ã</h4>
          </div>
          <div class="modal-body" style="padding: 20px; display: grid; gap: 12px;">
            <div>–ö—É—Ä—Å: <strong id="exchange-rate-label">1000 –æ—á–∫–æ–≤ ‚Üí 1 –º–æ–Ω–µ—Ç–∞</strong></div>
            <label>–°–∫–æ–ª—å–∫–æ –º–æ–Ω–µ—Ç —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å:
              <input id="exchange-amount" type="number" min="1" step="1" value="1" style="width: 120px; margin-left: 8px;">
            </label>
            <div>–°—Ç–æ–∏–º–æ—Å—Ç—å –≤ –æ—á–∫–∞—Ö: <strong id="exchange-cost">1000</strong></div>
            <div style="display:flex; gap:8px; justify-content:flex-end; margin-top: 8px;">
              <button id="exchange-back" class="btn">–ù–∞–∑–∞–¥</button>
              <button id="exchange-confirm" class="btn btn-primary">–û–±–º–µ–Ω—è—Ç—å</button>
            </div>
          </div>
        </div>
      </div>

      <!-- –ú–∞–≥–∞–∑–∏–Ω —Å–∫–∏–Ω–æ–≤ -->
      <div id="shop-modal" class="modal-overlay hidden">
        <div class="modal shop-modal">
          <div class="modal-header">
            <h3>üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω —Å–∫–∏–Ω–æ–≤</h3>
            <div style="display:flex; gap:10px;">
              <button id="btn-shop-exit" class="btn btn-primary">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
          </div>
          <div class="window-header">
            <h3 class="window-title" style="font-size: 20px;">üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω —Å–∫–∏–Ω–æ–≤</h3>
            <h4 class="window-subtitle">–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞</h4>
          </div>
          <div class="modal-body">
            <div class="shop-balance">
              <span class="balance-text">–í–∞—à–∏ –º–æ–Ω–µ—Ç—ã: <span id="shop-coins" class="balance-amount">0</span></span>
            </div>
            <div id="shop-skins-list" class="shop-skins-grid">
              <!-- –°–∫–∏–Ω—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
          </div>
        </div>
      </div>

    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∫–∞–∫ –º–æ–¥—É–ª–∏ -->
    <script type="module" src="./js/main.js"></script>

    <!-- –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–ê - –£–î–ê–õ–ò–¢–¨ –ü–ï–†–ï–î –†–ï–õ–ò–ó–û–ú -->
    <script type="module" src="./js/devTools.js"></script>
  </body>
</html>
