@echo off
echo üîë –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSH –∫–ª—é—á–µ–π –¥–ª—è –±–µ—Å–ø–∞—Ä–æ–ª—å–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è...
echo.

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ SSH –∫–ª—é—á–∞
if not exist "C:\Users\balti\.ssh\id_rsa.pub" (
    echo ‚ùå SSH –∫–ª—é—á –Ω–µ –Ω–∞–π–¥–µ–Ω! –°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á –∫–æ–º–∞–Ω–¥–æ–π:
    echo ssh-keygen -t rsa -b 4096 -f C:\Users\balti\.ssh\id_rsa -N ""
    pause
    exit /b 1
)

echo ‚úÖ SSH –∫–ª—é—á –Ω–∞–π–¥–µ–Ω
echo.

REM –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
echo üìÅ –°–æ–∑–¥–∞—é –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ...
ssh -o StrictHostKeyChecking=no root@109.172.89.107 "mkdir -p ~/.ssh && chmod 700 ~/.ssh"

REM –ö–æ–ø–∏—Ä—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á
echo üîë –ö–æ–ø–∏—Ä—É—é –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä...
scp -o StrictHostKeyChecking=no C:\Users\balti\.ssh\id_rsa.pub root@109.172.89.107:/tmp/id_rsa.pub

REM –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
echo ‚öôÔ∏è –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—é –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ...
ssh -o StrictHostKeyChecking=no root@109.172.89.107 "cat /tmp/id_rsa.pub >> ~/.ssh/authorized_keys && chmod 600 ~/.ssh/authorized_keys && rm /tmp/id_rsa.pub"

echo.
echo ‚úÖ SSH –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã!
echo.
echo üß™ –¢–µ—Å—Ç–∏—Ä—É—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...
ssh -o StrictHostKeyChecking=no root@109.172.89.107 "echo 'SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–µ–∑ –ø–∞—Ä–æ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç!' && echo '–¢–µ–∫—É—â–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:' && pwd && echo '–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:' && ls -la"

echo.
echo üéâ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –±–µ–∑ –ø–∞—Ä–æ–ª—è.
echo.
pause